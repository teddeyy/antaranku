{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts","../../src/validators/email.ts","../../src/validators/phone.ts","../../src/validators/username.ts","../../src/validators/password.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupPage } from './signup';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n@NgModule({\n  declarations: [\n    SignupPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    SignupPage\n  ]\n})\nexport class SignupPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\nimport { IonicPage,NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\nimport {FormBuilder,FormGroup,Validators} from '@angular/forms';\nimport  * as Constant from '../../config/constants';\n\nimport { Http, Headers } from '@angular/http';\n\nimport {EmailValidator} from '../../validators/email';\nimport {PhoneValidator} from '../../validators/phone';\nimport {UserNameValidator} from '../../validators/username';\nimport {PasswordValidator} from '../../validators/password';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n\n  base_url: any='';\n  form:FormGroup;\n\n  constructor(public http:Http, public toastCtrl:ToastController, public navCtrl: NavController, public alertCtrl:AlertController, public formBuilder: FormBuilder, public navParams: NavParams) {\n    this.base_url=Constant.domainConfig.base_url;\n\n    this.form = formBuilder.group({\n      full_name: ['',Validators.compose([Validators.minLength(5),Validators.maxLength(50),Validators.pattern('[a-zA-Z ]*'),Validators.required])],\n      user_name: ['',Validators.compose([UserNameValidator.isValid,Validators.minLength(5),Validators.maxLength(50)])],\n      email: ['',Validators.compose([EmailValidator.isValid,Validators.required])],\n      phone:['', PhoneValidator.isValid],\n      address:['',Validators.compose([Validators.minLength(5),Validators.maxLength(200),Validators.required])],\n      pwd:['',Validators.compose([Validators.minLength(5),Validators.maxLength(50)])],\n      repwd:['',PasswordValidator.isMatch],\n      send_code_method:['1']\n    });\n  }\n\n\n  signup(){\n    let signup_url='';\n    if(this.form.value.send_code_method==0){\n      //if SMS method\n      signup_url=this.base_url+'api/users_api/check_sms_register_valid';\n    }else{\n      //if mail method\n      signup_url=this.base_url+'api/users_api/check_mail_register_valid';\n    }\n\n    let headers:Headers = new Headers({\n      'Content-Type': 'application/x-www-form-urlencoded'\n    });\n\n    let data='user_name='+this.form.value.user_name+\n    '&full_name='+this.form.value.full_name+\n    '&email='+this.form.value.email+\n    '&address='+this.form.value.address+\n    '&pwd='+this.form.value.pwd+'&phone='+this.form.value.phone;\n\n    alert(data);\n\n    this.http.post(signup_url,data,{headers:headers}).subscribe(data=>{\n      console.log(data);\n      let jsonData=data.json();\n      if(jsonData.success==3){\n        //if success go to verification page\n        let alertCtrl = this.alertCtrl.create({\n          title: 'Please enter your verification code',\n          enableBackdropDismiss:false,\n          inputs: [{\n            name: 'code',\n            placeholder: 'verification code'\n          }],\n          buttons: [{\n            text: 'Cancel',\n            handler:data=>{\n              let post_data='email='+this.form.value.email;\n              this.http.post(this.base_url+'api/users_api/cancel_register',post_data,{headers:headers}).subscribe(data=>{\n                this.navCtrl.pop();\n              })\n            }\n          },\n          {\n            text: 'Resend',\n            handler: data => {\n              let post_data='email='+this.form.value.email+'&phone='+this.form.value.phone+'&send_code_method='+this.form.value.send_code_method;\n              this.http.post(this.base_url+'api/users_api/resend_verified_code',post_data,{headers:headers}).subscribe(data=>{\n\n              })\n            }\n          },\n          {\n            text: 'Submit',\n            handler: data => {\n              let post_data='code='+data.code+'&email='+this.form.value.email;\n              this.http.post(this.base_url+'api/users_api/register',post_data,{headers:headers}).subscribe(data=>{\n                if(data.json().success==1){\n                  //register done\n                  let confirmCtl= this.alertCtrl.create({\n                    message:'Signup Successfully, Login now !!!',\n                    buttons:[{\n                      text: 'Ok',\n                      handler: () => {\n                        alertCtrl.dismiss();\n                        this.navCtrl.pop();\n                      }\n                    }]\n                  });\n                  confirmCtl.present();\n                }else{\n                  //register failed\n                  let toastCtrl=this.toastCtrl.create({\n                    message:'your confirm code wrong, pls try again',\n                    duration: 3000,\n                    position: 'top'\n                  })\n                  toastCtrl.present();\n                }//end if else\n              });\n              return false;\n            }\n          }]\n        });\n        alertCtrl.present();\n      }\n\n      if(jsonData.success==1){\n        let alertCtrl=this.alertCtrl.create({\n          message:'UserName exist, try another !!',\n          buttons: ['Dismiss']\n        })\n        alertCtrl.present();\n      }\n\n      if(jsonData.success==0){\n        let alertCtrl=this.alertCtrl.create({\n          message:'Email exist, try another !!',\n          buttons: ['Dismiss']\n        })\n        alertCtrl.present();\n      }\n\n      if(jsonData.success==2){\n        let alertCtrl=this.alertCtrl.create({\n          message:'Phone exist, try another !!',\n          buttons: ['Dismiss']\n        })\n        alertCtrl.present();\n      }\n    },error=>{\n      console.log(error);\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","import {FormControl} from '@angular/forms';\nexport class EmailValidator {\n\tstatic isValid(control:FormControl): any{\n        var EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n\n        if (control.value != \"\" && (control.value.length <= 5 || !EMAIL_REGEXP.test(control.value))) {\n            return { \"invalidEmail\": true };\n        }\n\n        return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import {FormControl} from '@angular/forms';\nexport class PhoneValidator {\n    static isValid(control:FormControl): any{\n        let regExp = /^[0-9]{10}$/;\n\n        if (!regExp.test(control.value)) {\n            return {\"invalidMobile\": true};\n        }\n\n        return null;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/phone.ts","import {FormControl} from '@angular/forms';\nexport class UserNameValidator {\n\tstatic isValid(control:FormControl): any{\n\t    let regExp = /^[a-zA-Z0-9.\\-_$@*!]{3,30}$/;\n        if (!regExp.test(control.value)) {\n            return {\"invalidUserName\": true};\n        }\n        return null;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/username.ts","import { FormControl } from '@angular/forms';\nexport class PasswordValidator {\n\tstatic isMatch(control: FormControl): any {\n\t\tif (control.value == control.root.value['pwd']) {\n\t\t\tconsole.log('passwords  match');\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn { 'notMatch': true };\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/password.ts"],"sourceRoot":""}