{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACR;AACc;AAetD;IAAA;IAAgC,CAAC;IAApB,iBAAiB;QAZ7B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,6DAAW;aACZ;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,6DAAW,CAAC;gBACrC,4EAAe,CAAC,QAAQ,EAAE;aAC3B;YACD,OAAO,EAAE;gBACP,6DAAW;aACZ;SACF,CAAC;OACW,iBAAiB,CAAG;IAAD,wBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClB2B;AACM;AACjB;AACO;AACM;AACb;AACM;AACX;AAGY;AACd;AACa;AAOpD;IAiBE,qBACS,OAAsB,EACtB,SAAoB,EACpB,QAAkB,EAClB,SAAoB,EACpB,YAA0B,EAC1B,IAAU,EACV,MAAc,EACd,OAAgB,EACvB,SAA2B,EACpB,SAAmB;QAV5B,iBAiBC;QAhBQ,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,aAAQ,GAAR,QAAQ,CAAU;QAClB,cAAS,GAAT,SAAS,CAAW;QACpB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,SAAI,GAAJ,IAAI,CAAM;QACV,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAS;QAEhB,cAAS,GAAT,SAAS,CAAU;QAzB5B,aAAQ,GAAM,EAAE,CAAC;QACjB,SAAI,GAAM,EAAE,CAAC;QACb,YAAO,GAAM,EAAE,CAAC;QAShB,eAAU,GAAM,KAAK,CAAC;QAgBpB,IAAI,CAAC,QAAQ,GAAG,uEAAqB,CAAC,QAAQ,CAAC;QAE/C,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,EAAE;YACnC,KAAI,CAAC,gBAAgB,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,sCAAgB,GAAhB;QAAA,iBAeC;QAdC,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YAChC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,KAAI,CAAC,IAAI,GAAG,IAAI,KAAK,CAAC;YACtB,IAAI,GAAG,IAAI,IAAI,EAAE;gBACf,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;aAClB;iBAAI;gBACH,KAAI,CAAC,IAAI,GAAG,GAAG,CAAC;gBAChB,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC,EAAE,CAAC;gBACtB,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC;gBAC/B,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;gBACvB,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;aAC5B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oCAAc,GAAd;QAAA,iBA+BC;QA9BC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACpB,IAAI,GAAG,GAAG,mCAAmC,CAAC;QAC9C,IACE,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE;YAE3B,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI;YAE5B,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC;YACxB,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,GAAG,EACzB;YACD,IAAI,OAAO,GAAW,IAAI,8DAAO,CAAC;gBAChC,cAAc,EAAE,mCAAmC;aACpD,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAC,sBAAsB,EAAC,KAAK,GAAC,IAAI,CAAC,OAAO,GAAC,aAAa,GAAC,IAAI,CAAC,SAAS,GAAC,SAAS,GAAC,IAAI,CAAC,KAAK,GAAC,WAAW,GAAC,IAAI,CAAC,OAAO,EAAC,EAAC,OAAO,EAAC,OAAO,EAAC,CAAC,CAAC,SAAS,CAAC,cAAI;gBACjL,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBACzB,IAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,EAAC;oBACrB,KAAI,CAAC,YAAY,GAAG,0CAA0C,CAAC;iBAChE;qBAAI;oBACH,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;oBAC1B,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,iBAAO;oBAExC,CAAC,CAAC,CAAC;oBACH,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;oBAC/B,KAAI,CAAC,YAAY,GAAG,6BAA6B,CAAC;iBACnD;YACH,CAAC,EAAC,eAAK,IAAI,CAAC,CAAC;SACd;aAAI;YACH,IAAI,CAAC,YAAY,GAAG,0CAA0C,CAAC;SAChE;IACH,CAAC;IAED,gCAAU,GAAV;QAAA,iBAuBC;QAtBC,IAAI,GAAG,GAAG,gBAAgB,CAAC;QAE3B,IAAG,IAAI,CAAC,OAAO,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,IAAK,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,EAAC;YAC9K,IAAI,OAAO,GAAW,IAAI,8DAAO,CAAC;gBAChC,cAAc,EAAE,mCAAmC;aACpD,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAC,mBAAmB,EAAC,KAAK,GAAC,IAAI,CAAC,OAAO,GAAC,YAAY,GAAC,IAAI,CAAC,OAAO,GAAC,YAAY,GAAC,IAAI,CAAC,OAAO,EAAC,EAAC,OAAO,EAAC,OAAO,EAAC,CAAC,CAAC,SAAS,CAAC,cAAI;gBACvJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;gBACzB,IAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,EAAC;oBACrB,KAAI,CAAC,WAAW,GAAG,8BAA8B,CAAC;oBAClD,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;iBACzB;qBAAI;oBACH,KAAI,CAAC,WAAW,GAAG,oCAAoC,CAAC;iBACzD;YACH,CAAC,EAAC,eAAK;YAEP,CAAC,CAAC;SACH;aAAI;YACH,IAAI,CAAC,WAAW,GAAG,wCAAwC,CAAC;SAC7D;IACH,CAAC;IA7GU,WAAW;QAJvB,wEAAS,CAAC;YACT,QAAQ,EAAE,cAAc;WACG;SAC5B,CAAC;6EAmB+B;YACX,gEAAS;YACV,2EAAQ;YACP,iFAAS;YACN,4DAAY;YACpB,6DAAI;YACF,+DAAM;YACL,6EAAO;YACZ,4EAAgB;YACV,QAAS;OA3BjB,WAAW,CA+GvB;IAAD,CAAC;AAAA;SA/GY,WAAW,e","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    ProfilePage\n  ]\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { IonicPage,NavController, NavParams } from 'ionic-angular';\nimport { Component, ViewChild, NgModule } from '@angular/core';\nimport { Nav, Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { Http, Headers } from '@angular/http';\nimport  * as Constant from '../../config/constants';\nimport { Storage } from '@ionic/storage';\n\n\nimport {TranslateService} from '@ngx-translate/core';\nimport { Events } from 'ionic-angular';\nimport { OneSignal } from '@ionic-native/onesignal';\n\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html'\n})\nexport class ProfilePage {\n\n  base_url: any='';\n  user: any='';\n  user_id: any='';\n\n  avatar: any;\n  full_name: any;\n  phone: any;\n  address: any;\n  old_pwd: any;\n  new_pwd: any;\n  confirm_pwd: any;\n  check_edit: any=false;\n  msg_err_edit: any;\n  msg_err_pwd: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public platform: Platform, \n    public statusBar: StatusBar, \n    public splashScreen: SplashScreen, \n    public http: Http,\n    public events: Events,\n    public storage: Storage,\n    translate: TranslateService,\n    public oneSignal:OneSignal\n  ) {\n    this.base_url = Constant.domainConfig.base_url;\n\n    this.events.subscribe('user: change', () => {\n       this.ionViewWillEnter();\n    });\n  }\n\n  ionViewWillEnter(){\n    console.log('ionViewWillEnter ProfilePage');\n    this.storage.get('user').then((obj) => {\n      console.log(obj);\n      this.user = new Array;\n      if (obj == null) {\n        this.user = null;\n      }else{\n        this.user = obj;\n        this.user_id = obj.id;\n        this.full_name = obj.full_name;\n        this.phone = obj.phone;\n        this.address = obj.address;\n      }\n    });\n  }\n\n  update_profile(){\n    alert(this.user_id);\n    let reg = /^[\\s()+-]*([0-9][\\s()+-]*){6,20}$/;\n    if(\n      this.full_name.length >= 5 &&\n      this.full_name.length <= 60 &&\n\n      reg.test(this.phone) == true &&\n\n      this.address.length >= 5 &&\n      this.address.length <= 250\n      ){\n      let headers:Headers = new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded'\n      });\n      this.http.post(this.base_url+'api/users_api/update','id='+this.user_id+'&full_name='+this.full_name+'&phone='+this.phone+'&address='+this.address,{headers:headers}).subscribe(data=>{\n        console.log(data.json());\n        if(data.json().ok == 0){\n          this.msg_err_edit = 'You enter a missing or incorrect input 2';\n        }else{\n          let user = data.json()[0];\n          this.storage.remove('user').then(success=>{\n            \n          });\n          this.storage.set('user', user);\n          this.msg_err_edit = 'Update Profile successfully';\n        }\n      },error=>{ })\n    }else{\n      this.msg_err_edit = 'You enter a missing or incorrect input 1';\n    }\n  }\n  \n  change_pwd(){\n    let reg = /^[a-zA-Z0-9]+$/;\n\n    if(this.old_pwd != null && this.new_pwd != null &&  this.new_pwd == this.confirm_pwd && this.new_pwd.length <= 60 && this.new_pwd.length >= 5 && reg.test(this.new_pwd) == true){\n      let headers:Headers = new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded'\n      });\n      this.http.post(this.base_url+'api/users_api/pwd','id='+this.user_id+'&old_pass='+this.old_pwd+'&new_pass='+this.new_pwd,{headers:headers}).subscribe(data=>{\n        console.log(data.json());\n        if(data.json().ok == 1){\n          this.msg_err_pwd = 'Change password successfully';\n          this.old_pwd = null;\n          this.new_pwd = null;\n          this.confirm_pwd = null;\n        }else{\n          this.msg_err_pwd = 'Your username or password is wrong';\n        }\n      },error=>{\n\n      })\n    }else{\n      this.msg_err_pwd = 'You enter a missing or incorrect input';\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}