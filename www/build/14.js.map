{"version":3,"sources":["../../src/pages/modal/add-cart.module.ts","../../src/pages/modal/add-cart.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddCartPage } from './add-cart';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n@NgModule({\n  declarations: [\n    AddCartPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddCartPage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    AddCartPage\n  ]\n})\nexport class AddCartPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/add-cart.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage ,NavController, NavParams, ViewController, ToastController,Events } from 'ionic-angular';\r\nimport { Http, Headers } from '@angular/http';\r\nimport  * as Constant from '../../config/constants';\r\nimport { Storage } from '@ionic/storage';\r\nimport { CurrencyProvider } from '../../providers/currency';\r\n\r\nimport { SearchPage } from '../search/search';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-modal',\r\n  templateUrl: 'add-cart.html'\r\n})\r\nexport class AddCartPage {\r\n  base_url: any;\r\n  list: any;\r\n  list_only: any;\r\n  list_ext: any;\r\n  discount: any=0;\r\n  food_id: any;\r\n  price:any;\r\n  snug_size_name: any;\r\n  snug_size_price: any=0;\r\n  snug_ext_id: any;\r\n  snug_ext_name: any;\r\n  snug_ext_price: any;\r\n  total_price: any='';\r\n  temp_ext_id: any;\r\n  select_size:any='';\r\n  settings:any='';\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public http: Http,\r\n    public storage: Storage,\r\n    public currencyProvider: CurrencyProvider,\r\n    public toastCtrl:ToastController,\r\n    public viewCtrl: ViewController,    \r\n    public events:Events) {\r\n\r\n    this.base_url = Constant.domainConfig.base_url;\r\n    this.discount = this.navParams.get('discount');\r\n    this.food_id = this.navParams.get('food_id');\r\n    this.price= this.navParams.get(\"price\");\r\n    this.temp_ext_id = new Array();\r\n    this.list = new Array();\r\n\r\n    this.storage.get('settings').then(data=>{\r\n      this.settings=data;\r\n    })\r\n\r\n    this.http.get(Constant.domainConfig.base_url+'api/food_sizes_api/size?food_id='+this.food_id).subscribe(data=>{\r\n      if(data.json().empty == null){\r\n        this.list = data.json();\r\n        console.log(this.list);\r\n      }else{\r\n        this.list = null;\r\n        this.total_price = this.price*1 - this.price*this.discount/100;\r\n        this.snug_size_name = 'default';\r\n        this.snug_size_price = this.total_price;\r\n      }\r\n    })\r\n\r\n    this.list_ext = new Array();\r\n\r\n    this.http.get(Constant.domainConfig.base_url+'api/food_extras_api/extra?food_id='+this.food_id).subscribe(data=>{\r\n      if(data.json().empty == null){\r\n        this.list_ext = data.json();\r\n      }else{\r\n        this.list_ext = null;\r\n      }\r\n      console.log(this.list_ext);\r\n    })\r\n\r\n  }\r\n\r\n  selectSize(name, price){\r\n    this.snug_size_name = name;\r\n    this.total_price = this.total_price*1 - this.snug_size_price*1 + (price*1 - price*this.discount/100);\r\n    this.snug_size_price = price - price*this.discount/100;\r\n  }\r\n\r\n  selectExt(price, id){\r\n    let index_of = this.temp_ext_id.indexOf(id);\r\n    if(index_of == -1){\r\n      this.temp_ext_id.push(id);\r\n      this.total_price = this.total_price*1 + price*1;\r\n    }else{\r\n      this.temp_ext_id.splice(index_of, 1);\r\n      this.total_price = this.total_price*1 - price*1;\r\n    }\r\n\r\n    let arr = this.temp_ext_id.sort(function(a, b){return a - b});\r\n\r\n    this.snug_ext_id = '';\r\n    this.snug_ext_name = '';\r\n    this.snug_ext_price = '';\r\n    \r\n    if(arr != ''){\r\n      for (var i = 0; i < arr.length; i++) {\r\n        for (var j = 0; j < this.list_ext.length; j++) {\r\n          if(arr[i] == this.list_ext[j].id){\r\n            this.snug_ext_id += arr[i] + ',';\r\n            this.snug_ext_name += this.list_ext[j].name + ',';\r\n            this.snug_ext_price += this.list_ext[j].price + ',';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addToCart(){\r\n    if(this.list!=null && this.select_size==''){\r\n      alert(\"Please select an size\");\r\n    }else{\r\n\r\n      this.storage.ready().then(() => {\r\n        this.storage.get('carts').then((data)=>{\r\n          let carts = data;\r\n\r\n          let check = false;\r\n\r\n          for ( var i in carts ) {\r\n            if(carts[i].id == this.food_id && carts[i].size_name == this.snug_size_name && carts[i].lst_extras_id == this.snug_ext_id){\r\n              check = true;\r\n              carts[i].quantity = carts[i].quantity*1 + 1;\r\n              this.storage.set('carts', carts); \r\n              //this.events.publish('user:add_cart');\r\n              break;\r\n            }\r\n          };\r\n\r\n          if(check == false){\r\n            this.http.get(Constant.domainConfig.base_url+'api/foods_api/foods?product_id='+this.food_id).subscribe(obj=>{\r\n              let temp_obj = obj.json()[0];\r\n\r\n              temp_obj.quantity = 1;\r\n              temp_obj.lst_extras_name = this.snug_ext_name;\r\n              temp_obj.lst_extras_id = this.snug_ext_id;\r\n              temp_obj.lst_extras_price = this.snug_ext_price;\r\n              temp_obj.size_name = this.snug_size_name;\r\n              temp_obj.size_price = this.snug_size_price;\r\n              temp_obj.total_price = this.total_price;\r\n\r\n              carts.push(temp_obj);\r\n              this.storage.set('carts', carts);\r\n              this.events.publish('user:add_cart');\r\n            });\r\n          };\r\n\r\n        });\r\n      });\r\n\r\n      this.viewCtrl.dismiss();\r\n\r\n      let toast = this.toastCtrl.create({\r\n        message:'Successfully Added',\r\n        duration:1000,\r\n        position:'top'\r\n      })\r\n      toast.present();\r\n\r\n    }\r\n\r\n    return;\r\n  }\r\n\r\n  dismiss(){\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal/add-cart.ts"],"sourceRoot":""}